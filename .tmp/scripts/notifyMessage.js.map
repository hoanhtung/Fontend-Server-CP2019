{"version":3,"sources":["notifyMessage.js"],"names":["connection","signalR","HubConnectionBuilder","withUrl","EBSMSLocal","build","start","console","log","catch","err","error","toString","SendNotification","invoke","on","message","length","$","html","messageItem","i","scheduleDate","content","split","array","dateNumber","join","dateCreated","formatStringtoDateTimeString"],"mappings":";;AAAA,IAAIA,aAAa,IAAIC,QAAQC,oBAAZ,GAChBC,OADgB,CACRC,aAAa,gBADL,EACuBC,KADvB,EAAjB;;AAGAL,WAAWM,KAAX,CAAiB,YAAY;AACzBC,YAAQC,GAAR,CAAY,WAAZ;AACH,CAFD,EAEGC,KAFH,CAES,UAAUC,GAAV,EAAe;AACpB,WAAOH,QAAQI,KAAR,CAAcD,IAAIE,QAAJ,EAAd,CAAP;AACH,CAJD;;AAMA,SAASC,gBAAT,GAA4B;AACxBb,eAAWc,MAAX,CAAkB,aAAlB,EAAiCL,KAAjC,CAAuC,eAAO;AAAE,eAAOF,QAAQI,KAAR,CAAcD,IAAIE,QAAJ,EAAd,CAAP;AAAuC,KAAvF;AACH;AACDZ,WAAWe,EAAX,CAAc,gBAAd,EAAgC,UAACC,OAAD,EAAa;AACzC,QAAIA,QAAQC,MAAR,IAAkB,CAAtB,EAAyB;AACrBC,UAAE,kBAAF,EAAsBC,IAAtB,CAA2BH,QAAQC,MAAnC;AACAC,UAAE,uBAAF,EAA2BC,IAA3B,CAAgCH,QAAQC,MAAR,GAAiB,MAAjD;AACH;AACD,QAAIG,cAAc,EAAlB;AACA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIL,QAAQC,MAA5B,EAAoCI,GAApC,EAAyC;AACrC,YAAIC,eAAeN,QAAQK,CAAR,EAAWE,OAAX,CAAmBC,KAAnB,CAAyB,KAAzB,EAAgC,CAAhC,CAAnB;AACA,YAAIF,gBAAgB,IAApB,EAA0B;AACtB,gBAAIG,QAAQH,aAAaE,KAAb,CAAmB,GAAnB,CAAZ;AACA,gBAAIE,aAAa,CAACD,MAAM,CAAN,CAAD,EAAWA,MAAM,CAAN,CAAX,EAAqBA,MAAM,CAAN,CAArB,EAA+BE,IAA/B,CAAoC,EAApC,CAAjB;AACAP,2BAAe,iCAAiCM,UAAjC,GAA8C,wDAA7D;AACH,SAJD,MAIO;AACHN,2BAAe,uDAAf;AACH;AACDA,uBAAe,yGAAf;AACAA,uBAAe,mFAAf;AACAA,uBAAe,0DAA0DJ,QAAQK,CAAR,EAAWE,OAArE,GAA8E,MAA7F;AACAH,uBAAe,4BAA4BJ,QAAQK,CAAR,EAAWO,WAAvC,GAAqD,kCAArD,GAA0FC,6BAA6Bb,QAAQK,CAAR,EAAWO,WAAxC,CAA1F,GAAiJ,iBAAhK;AACAR,uBAAe,kBAAf,CAbqC,CAaF;AACtC;AACDF,MAAE,iBAAF,EAAqBC,IAArB,CAA0BC,WAA1B;AACH,CAtBD","file":"notifyMessage.js","sourcesContent":["var connection = new signalR.HubConnectionBuilder()\r\n.withUrl(EBSMSLocal + '/notifyMessage').build();\r\n\r\nconnection.start(function () {\r\n    console.log('connected');\r\n}).catch(function (err) {\r\n    return console.error(err.toString());\r\n});\r\n\r\nfunction SendNotification() {\r\n    connection.invoke('SendMessage').catch(err => { return console.error(err.toString()); });\r\n}\r\nconnection.on('ReceiveMessage', (message) => {\r\n    if (message.length != 0) {\r\n        $('#span-noti-count').html(message.length);\r\n        $('#span-noti-count-text').html(message.length + ' New')\r\n    }\r\n    var messageItem = '';\r\n    for (let i = 0; i < message.length; i++) {\r\n        var scheduleDate = message[i].content.split('on ')[1];\r\n        if (scheduleDate != null) {\r\n            var array = scheduleDate.split('/');\r\n            var dateNumber = [array[2], array[1], array[0]].join('');\r\n            messageItem += '<a onclick=\"loadSurgeryRoom(' + dateNumber + ');\" href=\"javascript:void(0)\" class=\"list-group-item\">';\r\n        } else {\r\n            messageItem += '<a href=\"javascript:void(0)\" class=\"list-group-item\">';\r\n        }\r\n        messageItem += '<div class=\"media\"><div class=\"media-left valign-middle\"><i class=\"fas fa-briefcase-medical\"></i></div>';\r\n        messageItem += '<div class=\"media-body\"><h6 class=\"media-heading\">You have new notification!</h6>';\r\n        messageItem += '<p class=\"notification-text font-small-3 text-muted\">' + message[i].content +'</p>'\r\n        messageItem += '<small><time datetime=\"' + message[i].dateCreated + '\" class=\"media-meta text-muted\">' + formatStringtoDateTimeString(message[i].dateCreated) + '</time></small>'\r\n        messageItem += '</div></div></a>'; // div-body, div-media, parient-a\r\n    }\r\n    $('#li-noti-parent').html(messageItem);\r\n})"]}