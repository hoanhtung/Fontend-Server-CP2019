{"version":3,"sources":["phucJS.js"],"names":["$","on","event","button","relatedTarget","scheduleIndex","data","css","click","start","Date","val","toJSON","end","loadAvailableRoomByStartEnd","hour","minute","loadAvailableRoomByHourMinute","shiftId","roomId","Number","parseInt","changeSchedule","room","roomArr","split","changeScheduleDuration","ajax","url","EBSMSLocal","contentType","dataType","JSON","stringify","startDate","endDate","method","success","response","select","wrapper","empty","console","log","Array","isArray","options","map","e","opt","text","getRoomById","name","forEach","append","startDateTime","endDateTime","replace","id","estimatedStartDateTime","estimatedEndDateTime"],"mappings":";;AAAAA,EAAE,kBAAF,EAAsBC,EAAtB,CAAyB,eAAzB,EAA0C,UAAUC,KAAV,EAAiB;AACvD,QAAIC,SAASH,EAAEE,MAAME,aAAR,CAAb;AACA,QAAIC,gBAAgBF,OAAOG,IAAP,CAAY,gBAAZ,CAApB;AACAN,MAAE,oBAAF,EAAwBO,GAAxB,CAA4B,YAA5B,EAA0C,QAA1C;AACAP,MAAE,aAAF,EAAiBM,IAAjB,CAAsB,UAAtB,EAAkCD,aAAlC;AACAL,MAAE,4BAAF,EAAgCO,GAAhC,CAAoC,YAApC,EAAkD,QAAlD;AACAP,MAAE,qBAAF,EAAyBM,IAAzB,CAA8B,UAA9B,EAA0CD,aAA1C;AACH,CAPD;AAQAL,EAAE,gBAAF,EAAoBQ,KAApB,CAA0B,YAAW;AACjC,QAAIC,QAAQ,IAAIC,IAAJ,CAASV,EAAE,YAAF,EAAgBW,GAAhB,EAAT,EAAgCC,MAAhC,EAAZ;AACA,QAAIC,MAAM,IAAIH,IAAJ,CAASV,EAAE,UAAF,EAAcW,GAAd,EAAT,EAA8BC,MAA9B,EAAV;AACAE,gCAA4BL,KAA5B,EAAmCI,GAAnC;AACH,CAJD;AAKAb,EAAE,wBAAF,EAA4BQ,KAA5B,CAAkC,YAAW;AACzC,QAAIO,OAAOf,EAAE,OAAF,EAAWW,GAAX,EAAX;AACA,QAAIK,SAAShB,EAAE,SAAF,EAAaW,GAAb,EAAb;AACAM,kCAA8BF,IAA9B,EAAoCC,MAApC;AACH,CAJD;AAKAhB,EAAE,aAAF,EAAiBQ,KAAjB,CAAuB,YAAW;AAC9B,QAAIU,UAAUlB,EAAE,IAAF,EAAQM,IAAR,CAAa,UAAb,CAAd;AACA,QAAIG,QAAQ,IAAIC,IAAJ,CAASV,EAAE,YAAF,EAAgBW,GAAhB,EAAT,EAAgCC,MAAhC,EAAZ;AACA,QAAIC,MAAM,IAAIH,IAAJ,CAASV,EAAE,UAAF,EAAcW,GAAd,EAAT,EAA8BC,MAA9B,EAAV;AACA,QAAIO,SAASC,OAAOC,QAAP,CAAgBrB,EAAE,gBAAF,EAAoBW,GAApB,EAAhB,CAAb;AACAW,mBAAeJ,OAAf,EAAwBT,KAAxB,EAA+BI,GAA/B,EAAoCM,MAApC;AACH,CAND;AAOAnB,EAAE,qBAAF,EAAyBQ,KAAzB,CAA+B,YAAW;AACtC,QAAIU,UAAUlB,EAAE,IAAF,EAAQM,IAAR,CAAa,UAAb,CAAd;AACA,QAAIiB,OAAOvB,EAAE,wBAAF,EAA4BW,GAA5B,EAAX;AACA,QAAIa,UAAUD,KAAKE,KAAL,CAAW,GAAX,CAAd;AACA,QAAIN,SAASC,OAAOC,QAAP,CAAgBG,QAAQ,CAAR,CAAhB,CAAb;AACA,QAAIf,QAAQe,QAAQ,CAAR,CAAZ;AACA,QAAIX,MAAMW,QAAQ,CAAR,CAAV;AACAE,2BAAuBR,OAAvB,EAAgCT,KAAhC,EAAuCI,GAAvC,EAA4CM,MAA5C;AACH,CARD;;AAWA;AACA,SAASL,2BAAT,CAAqCL,KAArC,EAA4CI,GAA5C,EAAiD;AAC7Cb,MAAE2B,IAAF,CAAO;AACHC,aAAKC,aAAa,iCADf;AAEHC,qBAAa,kBAFV;AAGHC,kBAAU,MAHP;AAIHzB,cAAM0B,KAAKC,SAAL,CAAe;AACjBC,uBAAWzB,KADM;AAEjB0B,qBAAStB;AAFQ,SAAf,CAJH;AAQHuB,gBAAQ,MARL;AASHC,iBAAS,iBAASC,QAAT,EAAmB;AACxB,gBAAIC,SAASvC,EAAE,gBAAF,CAAb;AACA,gBAAIwC,UAAUxC,EAAE,oBAAF,CAAd;AACAwC,oBAAQjC,GAAR,CAAY,YAAZ,EAA0B,QAA1B;AACAgC,mBAAOE,KAAP;AACAC,oBAAQC,GAAR,CAAYL,QAAZ;AACA,gBAAIM,MAAMC,OAAN,CAAcP,QAAd,CAAJ,EAA6B;AACzB,oBAAIQ,UAAUR,SAASS,GAAT,CAAa,UAASC,CAAT,EAAY;AACnC,wBAAIC,MAAMjD,EAAE,mBAAF,CAAV;AACAiD,wBAAItC,GAAJ,CAAQqC,CAAR;AACAC,wBAAIC,IAAJ,CAASC,YAAYH,CAAZ,EAAeI,IAAxB;AACA,2BAAOH,GAAP;AACH,iBALa,CAAd;AAMAH,wBAAQO,OAAR,CAAgB,UAASL,CAAT,EAAY;AACxBT,2BAAOe,MAAP,CAAcN,CAAd;AACH,iBAFD;AAGAR,wBAAQjC,GAAR,CAAY,YAAZ,EAA0B,SAA1B;AACH;AACJ;AA3BE,KAAP;AA6BH;AACD,SAASU,6BAAT,CAAuCF,IAAvC,EAA6CC,MAA7C,EAAqD;AACjDhB,MAAE2B,IAAF,CAAO;AACHC,aAAKC,aAAa,4CADf;AAEHvB,cAAM;AACFS,kBAAMA,IADJ;AAEFC,oBAAQA;AAFN,SAFH;AAMHoB,gBAAQ,KANL;AAOHC,iBAAS,iBAASC,QAAT,EAAmB;AACxB,gBAAIC,SAASvC,EAAE,wBAAF,CAAb;AACA,gBAAIwC,UAAUxC,EAAE,4BAAF,CAAd;AACAwC,oBAAQjC,GAAR,CAAY,YAAZ,EAA0B,QAA1B;AACAgC,mBAAOE,KAAP;AACAC,oBAAQC,GAAR,CAAYL,QAAZ;AACA,gBAAIM,MAAMC,OAAN,CAAcP,QAAd,CAAJ,EAA6B;AACzB,oBAAIQ,UAAUR,SAASS,GAAT,CAAa,UAASC,CAAT,EAAY;AACnC,wBAAIC,MAAMjD,EAAE,mBAAF,CAAV;AACAiD,wBAAItC,GAAJ,CAAWqC,EAAE7B,MAAb,SAAuB6B,EAAEO,aAAzB,SAA0CP,EAAEQ,WAA5C;AACAP,wBAAIC,IAAJ,CAAYC,YAAYH,EAAE7B,MAAd,EAAsBiC,IAAlC,4BAA6DJ,EAAEO,aAAF,CAAgBE,OAAhB,CAAwB,GAAxB,EAA6B,KAA7B,CAA7D,wBAAmHT,EAAEQ,WAAF,CAAcC,OAAd,CAAsB,GAAtB,EAA2B,KAA3B,CAAnH;AACA,2BAAOR,GAAP;AACH,iBALa,CAAd;AAMAH,wBAAQO,OAAR,CAAgB,UAASL,CAAT,EAAY;AACxBT,2BAAOe,MAAP,CAAcN,CAAd;AACH,iBAFD;AAGAR,wBAAQjC,GAAR,CAAY,YAAZ,EAA0B,SAA1B;AACH;AACJ;AAzBE,KAAP;AA2BH;AACD,SAASe,cAAT,CAAwBJ,OAAxB,EAAiCT,KAAjC,EAAwCI,GAAxC,EAA6CM,MAA7C,EAAqD;AACjDnB,MAAE2B,IAAF,CAAO;AACHC,aAAKC,aAAa,+BADf;AAEHC,qBAAa,kBAFV;AAGHC,kBAAU,MAHP;AAIHzB,cAAM0B,KAAKC,SAAL,CAAe;AACjByB,gBAAIxC,OADa;AAEjByC,oCAAwBlD,KAFP;AAGjBmD,kCAAsB/C,GAHL;AAIjBM,oBAAQA;AAJS,SAAf,CAJH;AAUHiB,gBAAQ,MAVL;AAWHC,iBAAS,mBAAW;AAChBK,oBAAQC,GAAR,CAAY,kBAAZ;AACH;AAbE,KAAP;AAeH;AACD,SAASjB,sBAAT,CAAgCR,OAAhC,EAAyCT,KAAzC,EAAgDI,GAAhD,EAAqDM,MAArD,EAA6D;AACzDnB,MAAE2B,IAAF,CAAO;AACHC,aAAKC,aAAa,0CADf;AAEHC,qBAAa,kBAFV;AAGHC,kBAAU,MAHP;AAIHzB,cAAM0B,KAAKC,SAAL,CAAe;AACjByB,gBAAIxC,OADa;AAEjByC,oCAAwBlD,KAFP;AAGjBmD,kCAAsB/C,GAHL;AAIjBM,oBAAQA;AAJS,SAAf,CAJH;AAUHiB,gBAAQ,MAVL;AAWHC,iBAAS,mBAAW;AAChBK,oBAAQC,GAAR,CAAY,kBAAZ;AACH;AAbE,KAAP;AAeH","file":"phucJS.js","sourcesContent":["$('#changeTimeModal').on('show.bs.modal', function (event) {\r\n    var button = $(event.relatedTarget);\r\n    var scheduleIndex = button.data('schedule-index');\r\n    $('#changeRoomWrapper').css('visibility', 'hidden');\r\n    $('#changeRoom').data('shift-id', scheduleIndex);\r\n    $('#changeRoomDurationWrapper').css('visibility', 'hidden');\r\n    $('#changeRoomDuration').data('shift-id', scheduleIndex);\r\n});\r\n$('#checkSchedule').click(function() {\r\n    var start = new Date($('#startTime').val()).toJSON();\r\n    var end = new Date($('#endTime').val()).toJSON();\r\n    loadAvailableRoomByStartEnd(start, end);\r\n});\r\n$('#checkScheduleDuration').click(function() {\r\n    var hour = $('#hour').val();\r\n    var minute = $('#minute').val();\r\n    loadAvailableRoomByHourMinute(hour, minute);\r\n});\r\n$('#changeRoom').click(function() {\r\n    var shiftId = $(this).data('shift-id');\r\n    var start = new Date($('#startTime').val()).toJSON();\r\n    var end = new Date($('#endTime').val()).toJSON();\r\n    var roomId = Number.parseInt($('#availableRoom').val());\r\n    changeSchedule(shiftId, start, end, roomId);\r\n});\r\n$('#changeRoomDuration').click(function() {\r\n    var shiftId = $(this).data('shift-id');\r\n    var room = $('#availableDurationRoom').val();\r\n    var roomArr = room.split(';');\r\n    var roomId = Number.parseInt(roomArr[0]);\r\n    var start = roomArr[1];\r\n    var end = roomArr[2];\r\n    changeScheduleDuration(shiftId, start, end, roomId);\r\n});\r\n\r\n\r\n//================================Phuc==================================\r\nfunction loadAvailableRoomByStartEnd(start, end) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/GetAvailableRoom/',\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        data: JSON.stringify({\r\n            startDate: start,\r\n            endDate: end\r\n        }),\r\n        method: 'post',\r\n        success: function(response) {\r\n            var select = $('#availableRoom');\r\n            var wrapper = $('#changeRoomWrapper');\r\n            wrapper.css('visibility', 'hidden');\r\n            select.empty();\r\n            console.log(response);\r\n            if (Array.isArray(response)) {\r\n                var options = response.map(function(e) {\r\n                    var opt = $('<option></option>');\r\n                    opt.val(e);\r\n                    opt.text(getRoomById(e).name);\r\n                    return opt;\r\n                });\r\n                options.forEach(function(e) {\r\n                    select.append(e);\r\n                });\r\n                wrapper.css('visibility', 'visible');\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction loadAvailableRoomByHourMinute(hour, minute) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/GetAvailableRoomForDuration/',\r\n        data: {\r\n            hour: hour,\r\n            minute: minute\r\n        },\r\n        method: 'get',\r\n        success: function(response) {\r\n            var select = $('#availableDurationRoom');\r\n            var wrapper = $('#changeRoomDurationWrapper');\r\n            wrapper.css('visibility', 'hidden');\r\n            select.empty();\r\n            console.log(response);\r\n            if (Array.isArray(response)) {\r\n                var options = response.map(function(e) {\r\n                    var opt = $('<option></option>');\r\n                    opt.val(`${e.roomId};${e.startDateTime};${e.endDateTime}`);\r\n                    opt.text(`${getRoomById(e.roomId).name} --- startDateTime: ${e.startDateTime.replace('T', ' - ')} - endDateTime: ${e.endDateTime.replace('T', ' - ')}`);\r\n                    return opt;\r\n                });\r\n                options.forEach(function(e) {\r\n                    select.append(e);\r\n                });\r\n                wrapper.css('visibility', 'visible');\r\n            }\r\n        }\r\n    });\r\n}\r\nfunction changeSchedule(shiftId, start, end, roomId) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/ChangeSchedule/',\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        data: JSON.stringify({\r\n            id: shiftId,\r\n            estimatedStartDateTime: start,\r\n            estimatedEndDateTime: end,\r\n            roomId: roomId\r\n        }),\r\n        method: 'post',\r\n        success: function() {\r\n            console.log('Kudo iz da bezt!');\r\n        }\r\n    });\r\n}\r\nfunction changeScheduleDuration(shiftId, start, end, roomId) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/ChangeScheduleForDuration/',\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        data: JSON.stringify({\r\n            id: shiftId,\r\n            estimatedStartDateTime: start,\r\n            estimatedEndDateTime: end,\r\n            roomId: roomId\r\n        }),\r\n        method: 'post',\r\n        success: function() {\r\n            console.log('Kudo iz da bezt!');\r\n        }\r\n    });\r\n}"]}