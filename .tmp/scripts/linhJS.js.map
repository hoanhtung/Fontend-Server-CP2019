{"version":3,"sources":["linhJS.js"],"names":["removeSessionStorage","sessionStorage","removeItem","javascript","window","location","href","getJSONfromSession","infoJSON","JSON","parse","getItem","parseImportInfo","ExcelExport","event","input","target","reader","FileReader","onload","fileData","result","wb","XLSX","read","type","SheetNames","forEach","sheetName","rowObj","utils","sheet_to_row_object_array","Sheets","getSurgeryName","setItem","stringify","readAsBinaryString","files","jsonObj","surName","table","document","getElementById","getElementsByTagName","newRow","insertRow","rows","length","newColumn","insertCell","checkBox","createElement","setAttribute","i","appendChild","createTextNode","a","surgeryShiftCode","addEventListener","getImportDetail","name","$","dataTable","searching","surgeryInfo","push","Number","ajax","url","EBSMSLocal","method","contentType","dataType","data","success","saveSurgeryProfile","shift","shiftInfo","sh","ckb","checked","gender","proStartDate","proEndDate","undefined","day","start","split","end","splice","alert","supplyList","supplyJson","s","medicalSupplyId","quantity","console","log","id","parseImportDetail","URL","searchParams","get","innerHTML","Date","getFullYear","supplyJSON","j","confirmAllSupply","ids","checkboxS","getElementsByClassName","value","makeSchedule","getMedicalRequest","button","getMedicalRequestDetail","surgeryShiftId","messesage","selectAllCheckboxes","chkSurgery","searchSchedule","infoShift","style","display","countResult","keyword","delete_mark_VI","str","toLowerCase","includes","saveSurgeryProcedure","editedProcedure","procedure","loadUsedSupplies","surgeryId","html","medicalSupplyName","on","last","after","AddUsedMedicalSupply","shiftId","supply","supplyId","children","supplyQuantity","reload"],"mappings":"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","file":"linhJS.js","sourcesContent":["function removeSessionStorage() {\r\n    sessionStorage.removeItem('infoObj');\r\n    sessionStorage.removeItem('supplyObj');\r\n    sessionStorage.removeItem('surgeryName');\r\n    javascript: window.location.href = 'importList.html'\r\n}\r\n\r\nfunction getJSONfromSession() {\r\n    var infoJSON = JSON.parse(sessionStorage.getItem('infoObj'));\r\n    if (infoJSON != null)\r\n        parseImportInfo(infoJSON);\r\n}\r\n\r\nfunction ExcelExport(event) {\r\n    var input = event.target;\r\n    var reader = new FileReader();\r\n    reader.onload = function () {\r\n        var fileData = reader.result;\r\n        var wb = XLSX.read(fileData, { type: 'binary' });\r\n\r\n        wb.SheetNames.forEach(function (sheetName) {\r\n            var rowObj = XLSX.utils.sheet_to_row_object_array(wb.Sheets[sheetName]);\r\n\r\n            switch (sheetName) {\r\n                case 'SurgeryProfile':\r\n                    getSurgeryName(rowObj);\r\n                    sessionStorage.setItem('infoObj', JSON.stringify(rowObj));\r\n                    break;\r\n                case 'MedicalSupply':\r\n                    sessionStorage.setItem('supplyObj', JSON.stringify(rowObj));\r\n                    break;\r\n            }\r\n        })\r\n    };\r\n    reader.readAsBinaryString(input.files[0]);\r\n};\r\n\r\nfunction parseImportInfo(jsonObj) {\r\n    var surName = JSON.parse(sessionStorage.getItem(\"surgeryName\"));\r\n    var table = document.getElementById('profile').getElementsByTagName('tbody')[0];\r\n    for (var i = 0; i < jsonObj.length; i++) {\r\n        var newRow = table.insertRow(table.rows.length);\r\n        var newColumn;\r\n        newColumn = newRow.insertCell(0);\r\n        var checkBox = document.createElement('input');\r\n        checkBox.setAttribute('type', 'checkbox');\r\n        checkBox.setAttribute('id', 'chk' + jsonObj[i]['Surgery Shift Code']);\r\n        checkBox.setAttribute('class', 'checkbox chkSurgery');\r\n        newColumn.appendChild(checkBox);\r\n\r\n        newColumn = newRow.insertCell(1);\r\n        newColumn.appendChild(document.createTextNode(i + 1));\r\n        newColumn = newRow.insertCell(2);\r\n        var a = document.createElement('a');\r\n        a.appendChild(document.createTextNode(jsonObj[i]['Patient Name']));\r\n        a.href = '#';\r\n        let surgeryShiftCode = jsonObj[i]['Surgery Shift Code'];\r\n        a.addEventListener(\"click\", () => { getImportDetail(surgeryShiftCode); });\r\n        newColumn.appendChild(a);\r\n        newColumn = newRow.insertCell(3);\r\n        newColumn.appendChild(document.createTextNode(jsonObj[i]['Gender']));\r\n        newColumn = newRow.insertCell(4);\r\n        newColumn.appendChild(document.createTextNode(surName[i].name));\r\n        newColumn = newRow.insertCell(5);\r\n        if (jsonObj[i]['Expected Date'] == null && jsonObj[i]['Expected Time'] == null) {\r\n            newColumn.appendChild(document.createTextNode('N/A'));\r\n        }\r\n        else {\r\n            newColumn.appendChild(document.createTextNode(jsonObj[i]['Expected Date'] +\r\n                ' - ' + jsonObj[i]['Expected Time']));\r\n        }\r\n    }\r\n    //pagination\r\n    $('#profile').dataTable({\r\n        searching: false\r\n    });\r\n}\r\n\r\nfunction getSurgeryName(surgeryInfo) {\r\n    var surName = [];\r\n    for (var i = 0; i < surgeryInfo.length; i++) {\r\n        surName.push({ 'id': Number(surgeryInfo[i]['Surgery Code']) });\r\n    }\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Import/getSurgeryNameById',\r\n        method: 'post',\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        data: JSON.stringify(surName),\r\n        success: function (data) {\r\n            sessionStorage.setItem(\"surgeryName\", JSON.stringify(data));\r\n            parseImportInfo(surgeryInfo);\r\n        }\r\n    });\r\n}\r\n\r\nfunction saveSurgeryProfile() {\r\n    var shift = JSON.parse(sessionStorage.getItem('infoObj'));\r\n    var shiftInfo = [];\r\n    for (var sh = 0; sh < shift.length; sh++) {\r\n        var ckb = document.getElementById('chk' + shift[sh]['Surgery Shift Code']);\r\n        if (!ckb.checked) continue;\r\n        var gender = -1;\r\n        var proStartDate = '', proEndDate = '';\r\n        if (shift[sh]['Expected Date'] != undefined && shift[sh]['Expected Time'] != undefined) {\r\n            var day = shift[sh]['Expected Date'];\r\n            var start = shift[sh]['Expected Time'].split(' - ')[0];\r\n            var end = shift[sh]['Expected Time'].split(' - ')[1];\r\n            proStartDate = day + ' ' + start;\r\n            proEndDate = day + ' ' + end;\r\n        }\r\n        if (shift[sh]['Gender'] == 'M') gender = 1;\r\n        shiftInfo.push({\r\n            'expectedSurgeryDuration': shift[sh]['Surgery Weight'],\r\n            'priorityNumber': Number(shift[sh]['Priority']),\r\n            'patientID': shift[sh]['Patient Id'],\r\n            'patientName': shift[sh]['Patient Name'],\r\n            'gender': gender,\r\n            'yearOfBirth': Number(shift[sh]['Patient DOB']),\r\n            'surgeryCatalogID': Number(shift[sh]['Surgery Code']),\r\n            'surgeryShiftCode': shift[sh]['Surgery Shift Code'],\r\n            'doctorId': Number(shift[sh]['Doctor ID']),\r\n            'proposedStartDateTime': proStartDate,\r\n            'proposedEndDateTime': proEndDate\r\n        })\r\n        shift.splice(sh, 1);\r\n        sh--;\r\n    }\r\n    if (shiftInfo.length == 0) {\r\n        alert(\"There're NOTHING to import !!!\");\r\n        return;\r\n    }\r\n    // GET import supplies\r\n    var supplyList = JSON.parse(sessionStorage.getItem('supplyObj'));\r\n    var supplyJson = [];\r\n    for (var s = 0; s < supplyList.length; s++) {\r\n        for (var i in shiftInfo) {\r\n            if (shiftInfo[i].surgeryShiftCode == supplyList[s]['Surgery Shift Code']) {\r\n                supplyJson.push({\r\n                    medicalSupplyId: Number(supplyList[s]['Code']),\r\n                    surgeryShiftCode: supplyList[s]['Surgery Shift Code']\r\n                    , quantity: supplyList[s]['Quantity']\r\n                });\r\n                supplyList.splice(s, 1);\r\n                s--;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    console.log(shiftInfo);\r\n    console.log(supplyJson);\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Import/ImportSurgeryShift',\r\n        method: 'post',\r\n        data: JSON.stringify(shiftInfo),\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        success: function () {\r\n            console.log('Import Shifts');\r\n            $.ajax({\r\n                url: EBSMSLocal + '/api/Import/ImportSurgeryShiftMedicalSupply',\r\n                method: 'post',\r\n                data: JSON.stringify(supplyJson),\r\n                contentType: 'application/json',\r\n                dataType: 'json',\r\n                success: function () {\r\n                    console.log('Import Suplies');\r\n                    sessionStorage.removeItem('infoObj');\r\n                    sessionStorage.removeItem('supplyObj');\r\n                    sessionStorage.setItem('infoObj', JSON.stringify(shift));\r\n                    sessionStorage.setItem('supplyObj', JSON.stringify(supplyList));\r\n                    alert('Import successfully!');\r\n                }\r\n            })\r\n        }\r\n    })\r\n    window.location.href = 'importList.html';\r\n}\r\n\r\nfunction getImportDetail(id) {\r\n    window.location.href = 'importDetail.html?Id=' + id;\r\n}\r\n\r\nfunction parseImportDetail() {\r\n    var url = new URL(window.location.href);\r\n    var id = url.searchParams.get(\"Id\");\r\n    var infoJSON = JSON.parse(sessionStorage.getItem('infoObj'));\r\n    var surName = JSON.parse(sessionStorage.getItem('surgeryName'));\r\n    for (var i = 0; i < infoJSON.length; i++) {\r\n        if (infoJSON[i]['Surgery Shift Code'] == id) {\r\n            document.getElementById('span-name').innerHTML = infoJSON[i]['Patient Name'];\r\n            document.getElementById('span-gender').innerHTML = infoJSON[i]['Gender'];\r\n            document.getElementById('span-age').innerHTML = new Date().getFullYear() - infoJSON[i]['Patient DOB'];\r\n            document.getElementById('span-identity').innerHTML = infoJSON[i]['Patient Id'];\r\n\r\n            document.getElementById('span-sname').innerHTML = surName[i].name;\r\n            document.getElementById('span-weight').innerHTML = infoJSON[i]['Surgery Weight'];\r\n            document.getElementById('span-doctor').innerHTML = infoJSON[i]['Doctor Name'];\r\n        }\r\n    }\r\n    var supplyJSON = JSON.parse(sessionStorage.getItem('supplyObj'));\r\n    var table = document.getElementById('listSupply').getElementsByTagName('tbody')[0];\r\n    var j = 0;\r\n    for (var i = 0; i < supplyJSON.length; i++) {\r\n        if (supplyJSON[i]['Surgery Shift Code'] == id) {\r\n            var newRow = table.insertRow(table.rows.length);\r\n            var newColumn;\r\n            newColumn = newRow.insertCell(0);\r\n            newColumn.appendChild(document.createTextNode(++j));\r\n            newColumn = newRow.insertCell(1);\r\n            newColumn.appendChild(document.createTextNode(supplyJSON[i]['Name']));\r\n            newColumn = newRow.insertCell(2);\r\n            newColumn.appendChild(document.createTextNode(supplyJSON[i]['Quantity']));\r\n        }\r\n    }\r\n}\r\n\r\nfunction confirmAllSupply() {\r\n    var ids = [];\r\n    var checkboxS = document.getElementsByClassName('checkbox');\r\n    for (var i = 0; i < checkboxS.length; i++) {\r\n        if (checkboxS[i].checked) {\r\n            var value = Number(checkboxS[i].value);\r\n            var id = { id: value };\r\n            ids.push(id);\r\n        }\r\n    }\r\n    if (ids.length == 0) {\r\n        alert(\"There're nothing to confirm!!\");\r\n        return;\r\n    }\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/MedicalConfirm/ConfirmMedicalRequest',\r\n        method: 'post',\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        data: JSON.stringify(ids),\r\n        success: function () {\r\n            makeSchedule();\r\n            window.location.href = 'confirmMSRequest.html'\r\n        }\r\n    })\r\n}\r\n\r\nfunction getMedicalRequest() {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/MedicalConfirm/GetAllMedicalSupplyRequest',\r\n        method: 'get',\r\n        success: function (data) {\r\n            var table = document.getElementById('request').getElementsByTagName('tbody')[0];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var id = data[i]['id'];\r\n                var newRow = table.insertRow(table.rows.length);\r\n                var newColumn;\r\n                newColumn = newRow.insertCell(0);\r\n                var checkBox = document.createElement('input');\r\n                checkBox.setAttribute('type', 'checkbox');\r\n                checkBox.setAttribute('value', id);\r\n                checkBox.setAttribute('class', 'checkbox chkSurgery');\r\n                newColumn.appendChild(checkBox);\r\n                newColumn = newRow.insertCell(1);\r\n                newColumn.appendChild(document.createTextNode(data[i]['patientName']));\r\n                newColumn = newRow.insertCell(2);\r\n                newColumn.appendChild(document.createTextNode(data[i]['surgeryName']));\r\n                newColumn = newRow.insertCell(3);\r\n                newColumn.appendChild(document.createTextNode(data[i]['createdDate']));\r\n                newColumn = newRow.insertCell(4);\r\n                var button = document.createElement('button');\r\n                button.appendChild(document.createTextNode(\"View Detail\"));\r\n                button.setAttribute(\"onclick\", \"getMedicalRequestDetail(\" + id + \");\");\r\n                button.setAttribute(\"id\", \"myBtn\");\r\n                button.setAttribute(\"type\", \"button\");\r\n                button.setAttribute(\"data-toggle\", \"modal\");\r\n                button.setAttribute(\"data-target\", \"#myModal\");\r\n                button.setAttribute(\"class\", \"btn btn-primary\");\r\n                newColumn.appendChild(button);\r\n            }\r\n            //pagination\r\n            $('#request').dataTable({\r\n                searching: false\r\n            });\r\n        }\r\n    })\r\n}\r\n\r\nfunction getMedicalRequestDetail(id) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/MedicalConfirm/GetMedicalSupplyRequest',\r\n        method: 'get',\r\n        data: { surgeryShiftId: id },\r\n        success: function (data) {\r\n            var messesage = '';\r\n            if (data.length == 0) {\r\n                messesage = 'Not found medical supplies request';\r\n            } else {\r\n                messesage = \"<table class=\\\"table\\\"><thead><tr class=\\\"border-0\\\">\" +\r\n                    \"<th class=\\\"border-0\\\">No.</th><th class=\\\"border-0\\\">Name</th><th class=\\\"border-0\\\">Quantity</th>\"\r\n                \"</tr></thead>\";\r\n                for (var i = 0; i < data.length; i++) {\r\n                    messesage = messesage + \"<tr><td>\" + (i + 1) + \"</td><td>\" + data[i]['name'] + \"</td><td>\" + data[i]['quantity'] + \"</td></tr>\";\r\n                }\r\n                messesage = messesage + \"</table>\";\r\n            }\r\n            document.getElementById('mheader').innerHTML = '<h4>Medical Supply Detail</h4><p>Surgery Shift Id - ' + id + '</p>';\r\n            document.getElementById('mbody').innerHTML = messesage;\r\n        }\r\n    })\r\n}\r\n\r\nfunction selectAllCheckboxes(event) {\r\n    var chkSurgery = $('.chkSurgery');\r\n    var checked = event.checked === true;\r\n    for (let i = 0; i < chkSurgery.length; i++) {\r\n        chkSurgery[i].checked = checked;\r\n    }\r\n}\r\n\r\nfunction searchSchedule() {\r\n    var infoShift = document.getElementsByClassName('info-shift');\r\n    document.getElementById(\"searchError\").style.display = \"none\";\r\n    for (var i = 0; i < infoShift.length; i++) {\r\n        infoShift[i].style.display = \"block\";\r\n    }\r\n    var countResult = 0;\r\n    var keyword = delete_mark_VI(document.getElementById('keyword').value);\r\n    if (keyword == \"\") return;\r\n    for (var i = 0; i < infoShift.length; i++) {\r\n        var str = delete_mark_VI(infoShift[i].innerHTML);\r\n        if (str.toLowerCase().includes(keyword.toLowerCase())) {\r\n            countResult++;\r\n            continue;\r\n        }\r\n        infoShift[i].style.display = \"none\";\r\n    }\r\n    if (countResult == 0) {\r\n        document.getElementById(\"searchError\").innerHTML = \"No result found!!\";\r\n    } else {\r\n        document.getElementById(\"searchError\").innerHTML = \"Found \" + countResult + \" results\";\r\n    }\r\n    document.getElementById(\"searchError\").style.display = \"inline\";\r\n}\r\n\r\nfunction saveSurgeryProcedure() {\r\n    var url = new URL(window.location.href);\r\n    var id = Number(url.searchParams.get(\"id\"));\r\n    var editedProcedure = document.getElementById('textarea-procedure').value;\r\n    var procedure = { 'surgeryShiftId': id, 'procedure': editedProcedure };\r\n    console.log(procedure);\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/SaveSurgeryProcedure',\r\n        method: 'post',\r\n        data: JSON.stringify(procedure),\r\n        contentType: 'application/json',\r\n        dataType: 'json'\r\n    })\r\n}\r\n\r\nfunction loadUsedSupplies(surgeryId) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/GetUsedSupply',\r\n        method: 'get',\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        data: { \"surgeryShiftId\": surgeryId },\r\n        success: function (data) {\r\n            var html = \"<tr><td>No.</td><td>Name</td><td>Quantity</td></tr>\";\r\n            var j = 0;\r\n            for (var i = 0; i < data.length; i++) {\r\n                html = html + \"<tr><td>\" + ++j + \"</td>\" +\r\n                    \"<td>\" + data[i].medicalSupplyName + \"</td>\" +\r\n                    \"<td>\" + data[i].quantity + \"</td></tr>\";\r\n            }\r\n            document.getElementById('table-supply').innerHTML = html;\r\n        }\r\n    })\r\n}\r\n\r\n//New row to ADD Supply\r\n$(document).on(\"click\", \".add-more-supply\", function () {\r\n    $(\".add-supply\").last().after(`<div class=\"row supply control-group\" style=\"padding-inline-start: 15px; margin-top: 10px\">\r\n<div class=\"col-8\">\r\n<input type=\"text\" list=\"supplies\" class=\"form-control has-error used-supply-name\" name=\"supply-name\" placeholder=\"Medical Supply\"/>\r\n</div>\r\n<input type=\"number\" min=\"1\" class=\"col-1 form-control supply-quantity\" name=\"quantity\">\r\n<div class=\"input-group-btn  col-1\">\r\n<button class=\"btn btn-danger remove\" type=\"button\"><i class=\"fa fa-times\"></i></button></div></div>`);\r\n});\r\n\r\n$(document).on(\"click\", \"#btn-addSupplyModal\", function () {\r\n    AddUsedMedicalSupply(shiftId);\r\n});\r\n\r\nfunction AddUsedMedicalSupply(surgeryId) {\r\n    var data = [];\r\n    var supply = document.getElementsByClassName('supply');\r\n    for (var i = 0; i < supply.length; i++) {\r\n        var supplyId = supply[i].children[0].children[0].value.split(' - ')[0];\r\n        var supplyQuantity = supply[i].children[1].value;\r\n        data.push({\r\n            \"medicalSupplyId\": supplyId,\r\n            \"surgeryShiftId\": surgeryId,\r\n            \"quantity\": supplyQuantity\r\n        });\r\n    }\r\n    console.log(data);\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/AddUsedMedicalSupply',\r\n        method: 'post',\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        data: JSON.stringify(data)\r\n    })\r\n    window.location.reload(true);\r\n}"]}