{"version":3,"sources":["vinhJS.js"],"names":["deleteIdsTreatmentReportDrug","shiftId","$","text","start_time","current_time","get_time","ajax","method","url","EBSMSLocal","success","data","console","log","Date","html","toLocaleDateString","toLocaleTimeString","cnt_time","getTime","setInterval","createTreatmentReport","progressiveDisease","checkDrug","drugs","createDrugObj","contentType","dataType","JSON","stringify","treatmentReportDrugs","done","rs","modal","loadTreatmentReport","fail","er","counts","find","each","name","querySelector","value","id","attr","undefined","alert","idTreatmentDrug","isMorning","isAfternoon","isEvening","isNight","push","length","div_treatment_table","empty","table","container","i","replace","medicalRequirement","forEach","element","morningQuantity","afternoonQuantity","eveningQuantity","nightQuantity","dateCreated","split","isUsed","append","error","document","on","treatmentId","editForm","index","unit","parents","remove","val","deleteTreatmentReportId","loadHealthcareReport","div_healthcare_table","eventContent","careContent","badgeWoundCondition","woundCondition","nurseName","DrugExcelExport","event","input","target","reader","FileReader","onload","fileData","result","wb","XLSX","read","type","SheetNames","sheetName","rowObj","utils","sheet_to_row_object_array","Sheets","sessionStorage","setItem","readAsBinaryString","files","saveDrug","drug","parse","getItem","drugInfo","sh","supplyList","supplyJson","s","medicalSupplyId","Number","surgeryShiftCode","removeItem","window","location","href","last","after","nurseId","children","capacity","updateUnit","parent","siblings","getNurse","select","fullName","options","completeStatus","surgeryShiftId","actualEndTime","roomPost","bedPost","reload"],"mappings":"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","file":"vinhJS.js","sourcesContent":["var deleteIdsTreatmentReportDrug = [];\r\nvar shiftId = $('#span-id').text();\r\n//gets current server time\r\nvar start_time;\r\nvar current_time;\r\nvar get_time = function () {\r\n    $.ajax({\r\n        method: 'get',\r\n        url: `${EBSMSLocal}/api/Schedule/GetServerTime`,\r\n        success: function (data) {\r\n            console.log(data);\r\n            start_time = new Date(data);\r\n            console.log(start_time);\r\n            $('#clock').html(current_time.toLocaleDateString() + \" \" +  current_time.toLocaleTimeString());\r\n        }\r\n    });\r\n}\r\n\r\n//counts 0.25s\r\nvar cnt_time = function () {\r\n    current_time = new Date(start_time.getTime() + 250);\r\n    $('#clock').html(current_time.toLocaleDateString() + \" \" +  current_time.toLocaleTimeString());\r\n    start_time = current_time;\r\n}\r\n\r\n\r\nsetInterval(cnt_time, 250); //add 250ms to current time every 250ms\r\nsetInterval(get_time, 30250); //sync with server every 30,25 second\r\nget_time();\r\n\r\nfunction createTreatmentReport(shiftId, progressiveDisease) {\r\n    if (!checkDrug()) {\r\n    } else {\r\n        var drugs = createDrugObj();\r\n        $.ajax({\r\n            url: EBSMSLocal + '/api/PostOp/CreateTreatmenReport',\r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n            data: JSON.stringify({\r\n                shiftId: shiftId,\r\n                progressiveDisease: progressiveDisease,\r\n                treatmentReportDrugs: drugs,\r\n            }),\r\n            method: 'post'\r\n        })\r\n            .done(rs => {\r\n                if (rs === true) {\r\n                    $('#treatmentModal').modal('toggle');\r\n                    loadTreatmentReport(shiftId);\r\n                }\r\n            })\r\n            .fail(er => console.log(er));\r\n    }\r\n\r\n}\r\n\r\nfunction checkDrug() {\r\n    var counts = [];\r\n    var rs = true;\r\n    $(\"body\").find(\".row-drug\").each(function () {\r\n        var name = this.querySelector('input[name=\"drug-name\"]').value;\r\n        var id = $(\"#drugs\").find('option[value=\"' + name + '\"]').attr('id');\r\n        if (id === undefined) {\r\n            rs = false;\r\n            alert(\"Please choose drug in list\");\r\n            return rs;\r\n        }\r\n        console.log(counts[id]);\r\n        if (counts[id] === undefined) {\r\n            counts[id] = 1;\r\n        } else {\r\n            rs = false;\r\n            alert(\"Duplicate drugs in your selection\");\r\n            return rs;\r\n        }\r\n    });\r\n    return rs;\r\n}\r\n\r\nfunction createDrugObj() {\r\n    var drugs = [];\r\n    $(\"body\").find(\".row-drug\").each(function () {\r\n        var idTreatmentDrug = this.querySelector('input[name=\"drug-id\"]').value != '' ? this.querySelector('input[name=\"drug-id\"]').value : 0;\r\n        var name = this.querySelector('input[name=\"drug-name\"]').value;\r\n        var id = $(\"#drugs\").find('option[value=\"' + name + '\"]').attr('id');\r\n        var isMorning = this.querySelector('input[name=\"isMorning\"]').value != '' ? this.querySelector('input[name=\"isMorning\"]').value : 0;\r\n        var isAfternoon = this.querySelector('input[name=\"isAfternoon\"]').value != '' ? this.querySelector('input[name=\"isAfternoon\"]').value : 0;\r\n        var isEvening = this.querySelector('input[name=\"isEvening\"]').value != '' ? this.querySelector('input[name=\"isEvening\"]').value : 0;\r\n        var isNight = this.querySelector('input[name=\"isNight\"]').value != '' ? this.querySelector('input[name=\"isNight\"]').value : 0;\r\n        if (isMorning == 0 && isAfternoon == 0 && isEvening == 0 && isNight == 0 && name != '') {\r\n            alert('Please input quantity for drug');\r\n        } else {\r\n            drugs.push({\r\n                'id' : idTreatmentDrug,\r\n                'drugId': id,\r\n                'morningQuantity': isMorning,\r\n                'afternoonQuantity': isAfternoon,\r\n                'eveningQuantity': isEvening,\r\n                'nightQuantity': isNight\r\n            })\r\n        }\r\n    });\r\n    console.log(drugs);\r\n    if (drugs.length > 0) {\r\n        return drugs;\r\n    }\r\n}\r\n\r\nfunction loadTreatmentReport(shiftId) {\r\n    var div_treatment_table = $('#div-treatment-table');\r\n    div_treatment_table.empty();\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/PostOp/GetTreatmentReportByShiftId?surgeryShiftId=' + shiftId,\r\n        method: 'get',\r\n        success: function (data) {\r\n            console.table(data);\r\n            if (data.length != 0) {\r\n                var container = '<table class=\"table \"><thead><tr><th>No.</th><th>From</th>'\r\n                    + '<th>Progressive Disease</th><th>Medical Requirement</th><th>Action</th></tr></thead>';\r\n                for (var i = 0; i < data.length; i++) {\r\n                    var progressiveDisease = data[i].progressiveDisease.replace(/\\n/g, \"<br />\");\r\n                    var medicalRequirement = '';\r\n                    data[i].treatmentReportDrugs.forEach(element => {\r\n                        medicalRequirement += `${element.name} (Morning: ${element.morningQuantity}| Afternoon:${element.afternoonQuantity}| Evening:${element.eveningQuantity}| Night:${element.nightQuantity})</br>`;\r\n                    });\r\n                    // var medicalRequirement = data[i].medicalRequirement.replace(/\\n/g, \"<br />\");\r\n                    container += '<tr><td>' + (i + 1) + '</td>'\r\n                    container += '<td>' + data[i].dateCreated.split('T')[0] + '</td>'\r\n                        + '<td>' + progressiveDisease + '</td>'\r\n                        + '<td>' + medicalRequirement + '</td>';\r\n                       \r\n                    if (data[i].isUsed === true) {\r\n                        container += `<td><button id='edit-treatment-${data[i].id}' class='btn btn-info edit-treatment' data-id='${data[i].id}' data-toggle=\"modal\"\r\n                        data-target=\"#treatmentModal\" disabled>Edit</button> <button id='delete-treatment-${data[i].id}' class='btn btn-danger delete-treatment' disabled>Delete</button></td>` + '</tr>';         \r\n                    } else {\r\n                        container += `<td><button id='edit-treatment-${data[i].id}' class='btn btn-info edit-treatment' data-id='${data[i].id}' data-toggle=\"modal\"\r\n                        data-target=\"#treatmentModal\">Edit</button> <button id='delete-treatment-${data[i].id}' class='btn btn-danger delete-treatment'>Delete</button></td>` + '</tr>';\r\n                    }\r\n                \r\n                }\r\n\r\n                container += '</table>';\r\n                div_treatment_table.append(container);\r\n            } else {\r\n                div_treatment_table.append('<h2>Not found no treatment</h2>');\r\n            }\r\n\r\n        },\r\n        error: function (data) {\r\n            console.log(data);\r\n        }\r\n    })\r\n}\r\n\r\n$(document).on(\"click\", \".edit-treatment\", function () {\r\n    var treatmentId = $(this).data('id');\r\n    var editForm = $(\"#edit-form-treatement-report\");\r\n    editForm.empty();\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/PostOp/GetTreatmentReportById?id=' + treatmentId,\r\n        method: 'get',\r\n        success: function (data) {\r\n            console.table(data);\r\n                editForm.append(`<div class=\"form-group\">\r\n                                <label for=\"progressiveDisease\">Progressive Disease</label>\r\n                                <textarea class=\"form-control\" rows=\"5\"\r\n                                id=\"progressiveDisease\">${data.progressiveDisease}</textarea>\r\n                                </div>`);\r\n                editForm.append(`<div class=\"form-group\">\r\n                <label for=\"medicalRequirement\">Medical Requirement</label>\r\n                <button class=\"btn btn-success add-more float-right\" type=\"button\"><i class=\"fa fa-plus\"></i>Add more</button>\r\n                <div class=\"mt-4 row\">\r\n                    <div class=\"col-5\"></div>\r\n                    <div class=\"col-1\" style=\"text-align: center;\"> Unit</div>\r\n                    <div class=\"col-1\" style=\"text-align: center;\"> Morning</div>\r\n                    <div class=\"col-1\" style=\"text-align: center;\"> Noon</div>\r\n                    <div class=\"col-1\" style=\"text-align: center;\"> Evening</div>\r\n                    <div class=\"col-1\" style=\"text-align: center;\"> Night</div>\r\n                </div>\r\n                <datalist id=\"drugs\"></datalist>`);\r\n                data.treatmentReportDrugs.forEach((element, index) => {\r\n                    if (index === 0) {\r\n                        editForm.append(\r\n                            `<div class=\"row row-drug control-group after-add-more\" style=\"padding-inline-start: 15px; margin-top: 10px\">\r\n                            <input type=\"text\" class=\"d-none\" name=\"drug-id\" value=\"${element.id}\" />\r\n                                                                        <div class=\"easyautocomplete-wraper col-5\">\r\n                                                                        <input type=\"text\" list=\"drugs\" class=\"drug form-control has-error\" name=\"drug-name\" placeholder=\"Enter drug name\" value=\"${element.name}\"  onchange=\"updateUnit.call(this, this.value)\"/>\r\n                                                                        </div>\r\n                                                                         <input type=\"text\" class=\"drug-quantity col-1 form-control  drug-used-time\" value=${element.unit} readonly/>\r\n                                                                        <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isMorning\" value=${element.morningQuantity}>\r\n                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isAfternoon\"  value=${element.afternoonQuantity}>\r\n                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isEvening\"  value=${element.eveningQuantity}>\r\n                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isNight\"  value=${element.nightQuantity}>\r\n                            </div>`);\r\n                    } else {\r\n                        editForm.append(\r\n                            `<div class=\"row row-drug control-group after-add-more\" style=\"padding-inline-start: 15px; margin-top: 10px\">\r\n                            <input type=\"text\" class=\"d-none\" name=\"drug-id\" value=\"${element.id}\" />\r\n                                                                        <div class=\"easyautocomplete-wraper col-5\">\r\n                                                                        <input type=\"text\" list=\"drugs\" class=\"drug form-control has-error\" name=\"drug-name\" placeholder=\"Enter drug name\" value=\"${element.name}\"  onchange=\"updateUnit.call(this, this.value)\"/>\r\n                                                                        </div>\r\n                                                                         <input type=\"text\" class=\"drug-quantity col-1 form-control  drug-used-time\" value=${element.unit} readonly/>\r\n                                                                        <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isMorning\" value=${element.morningQuantity}>\r\n                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isAfternoon\"  value=${element.afternoonQuantity}>\r\n                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isEvening\"  value=${element.eveningQuantity}>\r\n                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isNight\"  value=${element.nightQuantity}>\r\n                                                                        <div class=\"input-group-btn  col-1\">\r\n                                                                            <button class=\"btn btn-danger remove\" type=\"button\" data-id='${element.id}'><i class=\"fa fa-times\"></i></button>\r\n                                                                        </div>`);\r\n                    }\r\n                });\r\n                editForm.append(`<button id=\"editTreatment\" type=\"button\" data-id='${treatmentId}' \r\n                                                        class=\"btn btn-success float-right\" style=\"margin-top: 10px\">Edit</button>`);\r\n            },\r\n        error: function (data) {\r\n            console.log(data);\r\n        }\r\n    });\r\n});\r\n\r\n$(document).on(\"click\", \".remove\", function () {\r\n    $(this).parents(\".control-group\").remove();\r\n    var id = $(this).data('id');\r\n    deleteIdsTreatmentReportDrug.push(id);\r\n    console.log(deleteIdsTreatmentReportDrug);\r\n}); \r\n\r\n$(document).on(\"click\", \"#editTreatment\", function () {\r\n    var treatmentId = $(this).data('id');\r\n    var shiftId = $('#span-id').text();\r\n    if (!checkDrug()) {\r\n    } else {\r\n        var drugs = createDrugObj();\r\n        $.ajax({\r\n            url: EBSMSLocal + '/api/PostOp/EditTreatmentReport',\r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n            data: JSON.stringify({\r\n                id : treatmentId,\r\n                progressiveDisease: $(\"#progressiveDisease\").val(),\r\n                treatmentReportDrugs: drugs,\r\n                deleteTreatmentReportId: deleteIdsTreatmentReportDrug\r\n            }),\r\n            method: 'post'\r\n        })\r\n            .done(rs => {\r\n                if (rs === true) {\r\n                    $('#treatmentModal').modal('toggle');\r\n                    loadTreatmentReport(shiftId);\r\n                }\r\n            })\r\n            .fail(er => console.log(er));\r\n    }\r\n\r\n})\r\n\r\nfunction loadHealthcareReport(shiftId) {\r\n    var div_healthcare_table = $('#div-healthcare-table');\r\n    div_healthcare_table.empty();\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/PostOp/GetHealthCareReportBySurgeryShiftId?surgeryShiftId=' + shiftId,\r\n        method: 'get',\r\n        success: function (data) {\r\n            console.table(data);\r\n            if (data.length != 0) {\r\n                var container = '<table class=\"table \"><thead><tr><th>No.</th><th>Create Time</th>'\r\n                    + '<th>Wound Condition</th>'\r\n                    + '<th>Event Content</th><th>Care Content</th><th>Nurse</th></tr></thead>';\r\n                for (var i = 0; i < data.length; i++) {\r\n                    var eventContent = data[i].eventContent.replace(/\\n/g, \"<br />\");\r\n                    var careContent = data[i].careContent.replace(/\\n/g, \"<br />\");\r\n                    var badgeWoundCondition;\r\n                    switch (data[i].woundCondition) {\r\n                        case 1:\r\n                            badgeWoundCondition = '<span class=\"badge badge-success\">Good</span>';\r\n                            break;\r\n                        case 2:\r\n                            badgeWoundCondition = '<span class=\"badge badge-danger\">Bad</span>';\r\n                            break;\r\n                    }\r\n                    container += '<tr><td>' + (i + 1) + '</td>'\r\n                    container += '<td>' + data[i].dateCreated.split('T')[0] + '</td>'\r\n                        + `<td>${badgeWoundCondition}</td>`\r\n                        + '<td>' + eventContent + '</td>'\r\n                        + '<td>' + careContent + '</td>'\r\n                        + '<td>' + data[i].nurseName + '</td></tr>';\r\n                }\r\n                container += '</table>';\r\n                div_healthcare_table.append(container);\r\n            } else {\r\n                div_healthcare_table.append('<h2>Not found no healthcare report</h2>');\r\n            }\r\n\r\n        },\r\n        error: function (data) {\r\n            console.log(data);\r\n        }\r\n    })\r\n}\r\n\r\nfunction DrugExcelExport(event) {\r\n    var input = event.target;\r\n    var reader = new FileReader();\r\n    reader.onload = function () {\r\n        var fileData = reader.result;\r\n        var wb = XLSX.read(fileData, { type: 'binary' });\r\n\r\n        wb.SheetNames.forEach(function (sheetName) {\r\n            var rowObj = XLSX.utils.sheet_to_row_object_array(wb.Sheets[sheetName]);\r\n\r\n            switch (sheetName) {\r\n                case 'Sheet2':\r\n                    // parseImportInfo(rowObj);\r\n                    sessionStorage.setItem('drugObj', JSON.stringify(rowObj));\r\n                    break;\r\n            }\r\n        })\r\n    };\r\n    reader.readAsBinaryString(input.files[0]);\r\n};\r\n\r\nfunction saveDrug() {\r\n    var drug = JSON.parse(sessionStorage.getItem('drugObj'));\r\n    var drugInfo = [];\r\n    for (var sh in drug) {\r\n        drugInfo.push({\r\n            'name': drug[sh]['Name'],\r\n            'unit': (drug[sh]['Unit'])\r\n        })\r\n    }\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Drug/ImportDrug',\r\n        method: 'post',\r\n        data: JSON.stringify(drugInfo),\r\n        contentType: 'application/json',\r\n        dataType: 'json',\r\n        success: function () {\r\n            var supplyList = JSON.parse(sessionStorage.getItem('supplyObj'));\r\n            var supplyJson = [];\r\n            for (var s in supplyList) {\r\n                supplyJson.push({\r\n                    medicalSupplyId: Number(supplyList[s]['Code']),\r\n                    surgeryShiftCode: supplyList[s]['Surgery Shift Code']\r\n                });\r\n            }\r\n            $.ajax({\r\n                url: EBSMSLocal + '/api/Import/ImportSurgeryShiftMedicalSupply',\r\n                method: 'post',\r\n                data: JSON.stringify(supplyJson),\r\n                contentType: 'application/json',\r\n                dataType: 'json',\r\n                success: function () {\r\n                    sessionStorage.removeItem('infoObj');\r\n                    sessionStorage.removeItem('supplyObj');\r\n                    alert('Import successfully!')\r\n                    window.location.href = 'confirmMSRequest.html';\r\n                }\r\n            })\r\n\r\n        }\r\n    })\r\n}\r\n\r\n$(document).on(\"click\", \"#btn-new-treatment\", function () {\r\n    $(\"#treatmentModal\").empty();\r\n    $(\"#treatmentModal\").append(` <div class=\"modal-dialog modal-lg\" style=\"max-width: max-content;\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">Treatment</h5>\r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                        <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <div class=\"container-fluid\">\r\n                        <div class=\"row\">\r\n                            <div class=\"col px-0\">\r\n                                 <ul class=\"nav nav-tabs\" id=\"myTab\" role=\"tablist\">\r\n                                    <!-- <li class=\"nav-item\">\r\n                                        <a class=\"nav-link active\" id=\"treatment-tab\" data-toggle=\"tab\"\r\n                                            href=\"#treatment\" role=\"tab\" aria-controls=\"treatment\"\r\n                                            aria-selected=\"true\">New Treatment Report</a>\r\n                                    </li>  -->\r\n                                </ul>\r\n                                <div class=\"tab-content\" id=\"myTabContent\">\r\n                                    <div class=\"tab-pane fade show active\" id=\"treatment\" role=\"tabpanel\"\r\n                                        aria-labelledby=\"treatment-tab\">\r\n                                        <div class=\"container-fluid\">\r\n                                            <div class=\"row\">\r\n                                                <div id=\"edit-form-treatement-report\" class=\"col py-3\"\r\n                                                    style=\"border-left: 1px solid #dee2e6;border-bottom: 1px solid #dee2e6;border-right: 1px solid #dee2e6;\">\r\n                                                    <div class=\"form-group\">\r\n                                                        <label for=\"progressiveDisease\">Progressive Disease</label>\r\n                                                        <textarea class=\"form-control\" rows=\"5\"\r\n                                                            id=\"progressiveDisease\"></textarea>\r\n                                                    </div>\r\n                                                    <div class=\"form-group\">\r\n                                                        <label for=\"medicalRequirement\">Medical Requirement</label>\r\n                                                        <button class=\"btn btn-success add-more float-right\" type=\"button\"><i class=\"fa fa-plus\"></i>Add more</button>\r\n                                                        <div class=\"mt-4 row\">\r\n                                                            <div class=\"col-5\"></div>\r\n                                                            <div class=\"col-1\" style=\"text-align: center;\"> Unit</div>\r\n                                                            <div class=\"col-1\" style=\"text-align: center;\"> Morning</div>\r\n                                                            <div class=\"col-1\" style=\"text-align: center;\"> Noon</div>\r\n                                                            <div class=\"col-1\" style=\"text-align: center;\"> Evening</div>\r\n                                                            <div class=\"col-1\" style=\"text-align: center;\"> Night</div>\r\n                                                        </div>\r\n                                                        <datalist id=\"drugs\"></datalist>\r\n                                                        <div class=\"row row-drug after-add-more\" style=\"padding-inline-start: 15px;\">\r\n                                                            <input type=\"number\" class=\"d-none\" name=\"drug-id\" value=\"\" />\r\n                                                            <div class=\"easyautocomplete-wraper form-group col-5\" style=\"margin-bottom: 0px\">\r\n                                                                <input type=\"text\" list=\"drugs\" class=\"drug form-control has-error\" name=\"drug-name\" placeholder=\"Enter drug name\" onchange=\"updateUnit.call(this, this.value)\"/>\r\n                                                            </div>\r\n                                                            <input type=\"text\" class=\"drug-quantity col-1 form-control  drug-used-time\" readonly/>\r\n                                                            <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isMorning\">\r\n                                                            <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isAfternoon\">\r\n                                                            <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isEvening\">\r\n                                                            <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isNight\">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <button id=\"createTreatment\" type=\"button\"\r\n                                                        class=\"btn btn-success float-right\">Create</button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <!-- <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>  -->\r\n                </div>\r\n            </div>\r\n        </div>`);\r\n})\r\n\r\n$(document).on(\"click\", \".add-more\", function () {\r\n                $(\".after-add-more\").last().after(`<div class=\"row row-drug control-group after-add-more\" style=\"padding-inline-start: 15px; margin-top: 10px\">\r\n                <input type=\"number\" class=\"d-none\" name=\"drug-id\" value=\"\" />\r\n                                                                    <div class=\"easyautocomplete-wraper col-5\">\r\n                                                                    <input type=\"text\" list=\"drugs\" class=\"drug form-control \" name=\"drug-name\"  placeholder=\"Enter drug name\"  onchange=\"updateUnit.call(this, this.value)\"/>\r\n                                                                </div>\r\n                                                                <input type=\"text\" class=\"drug-quantity col-1 form-control  drug-used-time\" readonly/>\r\n                                                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isMorning\">\r\n                                                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isAfternoon\">\r\n                                                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isEvening\">\r\n                                                                <input type=\"number\" min=\"0\" class=\"col-1 drug-used-time form-control\" name=\"isNight\">\r\n                                                                <div class=\"input-group-btn  col-1\">\r\n                                                                    <button class=\"btn btn-danger remove\" type=\"button\"><i class=\"fa fa-times\"></i></button>\r\n                                                                </div>\r\n                                                            </div>`);\r\n    // autocompleteDrug();\r\n});\r\n\r\n$(document).on(\"click\", \"#createTreatment\", function () {\r\n    // var shiftId = $(this).data('shift-id');\r\n    var shiftId = $('#span-id').text();\r\n    var progressiveDisease = $('#progressiveDisease').val();\r\n    createTreatmentReport(shiftId, progressiveDisease);\r\n\r\n});\r\n\r\n$(document).on(\"click\", \"#assignNurse\", function () {\r\n    var nurseId =  $('#select-nurse').children(\"option:selected\").attr('id');\r\n    var capacity =  $('#select-nurse').children(\"option:selected\").data('capacity');\r\n    if (capacity >= 7) {\r\n        alert(\"This nurse has taken care max patient\");\r\n    } else {\r\n        $.ajax({\r\n            url : EBSMSLocal + `/api/PostOp/AssignNurse?shiftId=${shiftId}&nurseId=${nurseId}`,\r\n            method: 'get',\r\n        }).done(rs => {\r\n            if (rs === true) {\r\n                $('#assignNurseModal').modal('toggle');\r\n            }\r\n        })\r\n        .fail(er => console.log(er));\r\n    }\r\n});\r\n\r\n\r\n\r\nfunction updateUnit(name){\r\n    var id = $(\"#drugs\").find('option[value=\"' + name + '\"]').data('unit');\r\n    console.log(id);\r\n    console.log($(this).parent().siblings('.drug-quantity'));\r\n    $(this).parent().siblings('.drug-quantity').val(id);\r\n}\r\n\r\nfunction getNurse(){\r\n    var select = $(\"#select-nurse\");\r\n    select.empty();\r\n    var nurseName = $(\"#assigned-nurse-name\");\r\n    nurseName.empty();\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/PostOp/GetNurseByShiftId?shiftId=' + shiftId,\r\n        method: 'get',\r\n        success: function (data) {\r\n            nurseName.append(data.fullName);\r\n        }\r\n    });\r\n\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/PostOp/GetAllNurse',\r\n        method: 'get',\r\n        success: function (data) {\r\n\r\n            $(data).each(function () {\r\n                var options = `<option id='${this.id}' value='${this.fullName}' data-capacity='${this.capacity}' >${this.fullName}</option>`;\r\n                select.append(options);\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction completeStatus(surgeryShiftId, actualEndTime) {   \r\n    const roomPost = $('#roomPost').val();\r\n    const bedPost = $('#bedPost').val();\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/SetPostoperativeStatus?shiftId=' + surgeryShiftId + \r\n        '&roomPost=' + roomPost + '&bedPost=' + bedPost + '&actualEndDateTime=' + actualEndTime,\r\n        method: 'post',\r\n        success: function(data) {\r\n            window.location.reload();\r\n        }\r\n    })\r\n}"]}