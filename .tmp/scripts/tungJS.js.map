{"version":3,"sources":["tungJS.js"],"names":["EBSMSLocal","loadSurgeryRoom","surgeryDay","strAppend1","divRoom","$","empty","ajax","url","method","success","room","i","name","j","slotRooms","id","data","slotRoomId","dayNumber","shift","strAppend2","index","length","firstEstimatedStart","estimatedStartDateTime","firstEstimatedEnd","estimatedEndDateTime","firstActualStart","actualStartDateTime","firstActualEnd","actualEndDateTime","estimatedStart","Date","estimatedEnd","actualStart","actualEnd","shiftId","statusName","catalogName","patientName","undefined","convertDateToTime","priorityNumber","formatStringtoDateTimeString","html","checkPreviousShift","surgeryShiftId","result","console","log","startSurgeryShift","actualStartTime","today","val","convertDateToNumber","checkStatus","loadSurgeryShiftDetail","refreshSchedule","setPostStatus","actualEndTime","roomPost","bedPost","SetFinishedStatus","appendIntraSurgeryShiftId","start","end","split","formatStartTime","appendPostSurgeryShiftId","formatEndTime","LoadSurgeryShiftByRoomAndDate","roomId","strAppend","catelogName","gender","age","speciality","surgeryName","surgeryType","startTime","endTime","procedure","async","makeSchedule","loadSurgeryShiftNoSchedule","div_shift","container","confirmDate","proposedStartDateTime","proposedEndDateTime","scheduleDate","expectedSurgeryDuration","append","surgeryId","preStatus","intraStatus","postStatus","addClass","toLowerCase","removeClass","appendChangeInfoShift","getScheduleByDay","date","AddEmergencyShift","startDatetime","endDatetime","chkForce","dataType","contentType","JSON","stringify","isForceAdd","alert"],"mappings":"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","file":"tungJS.js","sourcesContent":["var EBSMSLocal = 'https://localhost:44372';\r\n// var EBSMSLocal = 'http://172.20.10.7:5000';\r\n// var EBSMSLocal = 'http://localhost:5000';\r\n\r\nfunction loadSurgeryRoom(surgeryDay) {\r\n    var strAppend1 = '';\r\n    var divRoom = $('#row-surgery-room');\r\n    divRoom.empty();\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/GetSlotRooms/',\r\n        method: 'get',\r\n        success: function (room) {\r\n            for (let i = 0; i < room.length; i++) {\r\n                strAppend1 += '<div class=\"div-item-surgery-room\">';\r\n                strAppend1 += '<div class = \"div-room-name\">' + room[i].name + '</div>';\r\n                strAppend1 += '<div class=\"div-all-slot-room\">';\r\n                for (let j = 0; j < room[i].slotRooms.length; j++) {\r\n                    strAppend1 += '<div class=\"div-item-slot-room\" id=\"body-slot-room-' + room[i].slotRooms[j].id + '\"></div>';\r\n                    $.ajax({\r\n                        url: EBSMSLocal + '/api/Schedule/GetSurgeryShiftsByRoomAndDate/',\r\n                        method: 'get',\r\n                        data: { slotRoomId: room[i].slotRooms[j].id, dayNumber: surgeryDay },\r\n                        success: function (shift) {\r\n                            var strAppend2 = '';\r\n                            for (let index = 0; index < shift.length; index++) {\r\n                                var firstEstimatedStart = shift[index].estimatedStartDateTime;\r\n                                var firstEstimatedEnd = shift[index].estimatedEndDateTime;\r\n                                var firstActualStart = shift[index].actualStartDateTime\r\n                                var firstActualEnd = shift[index].actualEndDateTime\r\n\r\n                                var estimatedStart = new Date(firstEstimatedStart);\r\n                                var estimatedEnd = new Date(firstEstimatedEnd);\r\n                                var actualStart = new Date(firstActualStart);\r\n                                var actualEnd = new Date(firstActualEnd);\r\n\r\n                                var shiftId = shift[index].id;\r\n                                if (shift[index].statusName == 'Postoperative') {\r\n                                    strAppend2 += '<div style=\"background-color: #b2bec3\" class=\"div-shift-room\">';\r\n                                } else if (shift[index].statusName == 'Intraoperative') {\r\n                                    strAppend2 += '<div style=\"background-color: #ffeaa7\" class=\"div-shift-room\">';\r\n                                } else {\r\n                                    strAppend2 += '<div class=\"div-shift-room\">';\r\n                                }\r\n                                strAppend2 += '<div class=\"info-shift\">';\r\n                                // if (shift[index].statusName != 'Intraoperative' && shift[index].statusName != 'Postoperative') {\r\n                                //     strAppend2 += '<input name=\"swapChk\" type=\"checkbox\" value=\"' + shiftId  + '\" />';\r\n                                // }\r\n                                strAppend2 += '<div><span><b>' + shiftId + '</b></span></div>';\r\n                                strAppend2 += '<div><span><b>' + shift[index].catalogName + '</b></div>';\r\n                                strAppend2 += '<div><span><b>Patient: </b>' + shift[index].patientName + '</span></div>';\r\n                                strAppend2 += '<div><span><b>Time: </b>';\r\n                                if (firstActualStart == undefined) {\r\n                                    strAppend2 += convertDateToTime(estimatedStart);\r\n                                } else {\r\n                                    strAppend2 += convertDateToTime(actualStart);\r\n                                }\r\n                                strAppend2 += ' - ';\r\n                                if (firstActualEnd == undefined) {\r\n                                    strAppend2 += convertDateToTime(estimatedEnd);\r\n                                } else {\r\n                                    strAppend2 += convertDateToTime(actualEnd);\r\n                                }\r\n                                strAppend2 += '</span></div>'; //div time\r\n                                strAppend2 += '<div class=\"mybuttonoverlap\">' +\r\n                                    '<a data-toggle=\"tooltip\" title=\"View\" href=\"./viewScheduleItem.html?id=' + shiftId + '\" class=\"btn btn-info\"><i class=\"far fa-eye\"/></a>';\r\n                                if (shift[index].statusName == 'Preoperative') {\r\n                                    strAppend2 += '<a id=\"changeScheduleA\" title=\"Change\" href=\"javascript:void(0)\" class=\"btn btn-primary\" data-priority=\"' + shift[index].priorityNumber +\r\n                                        '\" data-schedule-index=\"' + shiftId + '\" data-start-datetime=\"' + formatStringtoDateTimeString(firstEstimatedStart) + '\" data-end-datetime=\"' + formatStringtoDateTimeString(firstEstimatedEnd) + '\" ' +\r\n                                        'data-toggle=\"modal\" data-target=\"#changeTimeModal\"><i class=\"far fa-edit\"/></a>' +\r\n                                        '<button title=\"Begin\" id=\"begin-btn\" data-toggle=\"modal\" data-target=\"#changeIntraStatusModal\" class=\"btn btn-success\" onclick=\"appendIntraSurgeryShiftId(' + shiftId + ', \\'' + firstEstimatedStart + '\\', \\'' + firstEstimatedEnd + '\\')\">' +\r\n                                        '<i class=\"fas fa-procedures\"></i></button>' +\r\n                                        '</div>'; //div mybuttonoverlap\r\n                                }\r\n                                else if (shift[index].statusName == 'Intraoperative') {\r\n                                    strAppend2 += '<button title=\"Complete\" class=\"btn btn-success\" onclick=\"appendPostSurgeryShiftId(' + shiftId + ', \\'' + firstActualStart + '\\', \\'' + firstEstimatedEnd + '\\')\" data-toggle=\"modal\" data-target=\"#changePostStatusModal\">' +\r\n                                        '<i style=\"color: white\" class=\"far fa-check-square\"></i></button>' +\r\n                                        '</div>'; //div mybuttonoverlap\r\n                                } else {\r\n                                    strAppend2 += '</div>'; //div mybuttonoverlap\r\n                                }\r\n                                strAppend2 += '</div>'; //div-shift-room\r\n                                strAppend2 += '</div>'; //info-shift\r\n                            }\r\n                            $('#body-slot-room-' + room[i].slotRooms[j].id).html(strAppend2);\r\n                            strAppend1 += '</div>'; //div-item-slot-room\r\n                        },\r\n                    });// end ajax surgery shift\r\n                }\r\n                strAppend1 += '</div>'; // div all slot room\r\n                strAppend1 += '</div>'; // div item surgery room\r\n            }\r\n            divRoom.html(strAppend1);\r\n        },\r\n        // async: false\r\n    });// end ajax room\r\n}\r\nfunction checkPreviousShift(surgeryShiftId) {\r\n    var result;\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/CheckStatusPreviousSurgeryShift',\r\n        method: 'get',\r\n        data: { 'shiftId': surgeryShiftId },\r\n        success: function (data) {\r\n            // if (data) {\r\n            //     $('#begin-btn').removeClass('btn-visibility');\r\n            // } else {\r\n            //     $('#begin-btn').addClass('btn-visibility');\r\n            // }\r\n            result = data;\r\n            console.log('trong nay ne: ' + result);\r\n\r\n        },\r\n        // async: false\r\n    });\r\n    return result;\r\n}\r\n// change status\r\nfunction startSurgeryShift(shiftId, actualStartTime) {\r\n    var today = new Date($('#date-input').val());\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Status/SetIntraoperativeStatus?shiftId=' + shiftId + '&actualStartDateTime=' + actualStartTime,\r\n        method: 'post',\r\n        success: function (data) {\r\n            if (data) {\r\n                loadSurgeryRoom(convertDateToNumber(today));\r\n                checkStatus(shiftId);\r\n                loadSurgeryShiftDetail(shiftId);\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n//Refresh Schedule\r\nfunction refreshSchedule(surgeryShiftId) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/RefreshSurgeryShift?shiftId=' + surgeryShiftId,\r\n        method: 'post',\r\n        success: function (data) {\r\n            if (data) {\r\n                loadSurgeryRoom(convertDateToNumber(new Date($('#date-input').val())));\r\n            }\r\n\r\n        }\r\n    })\r\n}\r\n\r\nfunction setPostStatus(surgeryShiftId, actualEndTime) {\r\n    const roomPost = $('#roomPost').val();\r\n    const bedPost = $('#bedPost').val();\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Status/SetPostoperativeStatus?shiftId=' + surgeryShiftId +\r\n            '&roomPost=' + roomPost + '&bedPost=' + bedPost + '&actualEndDateTime=' + actualEndTime,\r\n        method: 'post',\r\n        success: function (data) {\r\n            if (data) {\r\n                refreshSchedule(surgeryShiftId);\r\n                checkStatus(surgeryShiftId);\r\n                loadSurgeryShiftDetail(surgeryShiftId)\r\n            }\r\n\r\n        }\r\n    })\r\n}\r\n\r\nfunction SetFinishedStatus(surgeryShiftId) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Status/SetFinishedStatus?shiftId=' + surgeryShiftId,\r\n        method: 'post',\r\n        success: function (data) {\r\n            if (data) {\r\n                checkStatus(surgeryShiftId);\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n//-----------------------------------\r\n// append surgery modal\r\nfunction appendIntraSurgeryShiftId(shiftId, start, end) {\r\n    $('#surgery-shift-intra-status').html(shiftId)\r\n    $('#surgery-shift-intra-status').data('shiftId', shiftId);\r\n    $('.estimated-start-time').html(formatStringtoDateTimeString(start));\r\n    $('.estimated-end-time').html(formatStringtoDateTimeString(end));\r\n    $('#surgery-shift-intra-status').data('day', end.split('T')[0]);\r\n    var formatStartTime = formatStringtoDateTimeString(start).split(' ')[0];\r\n    $('#actual-start').val(formatStartTime);\r\n}\r\nfunction appendPostSurgeryShiftId(shiftId, start, end) {\r\n    $('#surgery-shift-post-status').html(shiftId)\r\n    $('#surgery-shift-post-status').data('shiftId', shiftId);\r\n    $('.estimated-start-time').html(formatStringtoDateTimeString(start));\r\n    $('.estimated-end-time').html(formatStringtoDateTimeString(end));\r\n    $('#surgery-shift-post-status').data('day', end.split('T')[0]);\r\n\r\n    var formatEndTime = formatStringtoDateTimeString(end).split(' ')[0];\r\n    $('#actual-end').val(formatEndTime);\r\n}\r\n// -----------------------------------\r\n\r\nfunction LoadSurgeryShiftByRoomAndDate() {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/GetSurgeryShiftsByRoomAndDate/',\r\n        method: 'get',\r\n        data: { roomId: room[index].id, dayNumber: surgeryDay },\r\n        success: function (shift) {\r\n            for (let index = 0; index < shift.length; index++) {\r\n                strAppend += '<a href=\"./viewScheduleItem.html?Id=' + shift[index].id + '\"><div class=\"div-roomBodyItem\">' +\r\n                    shift[index].catelogName +\r\n                    'Patient: ' + shift[index].patientName +\r\n                    'Time: ' + shift[index].estimatedStartDateTime + '-' + shift[index].estimatedEndDateTime;\r\n                '</div></a>';\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nfunction loadSurgeryShiftDetail(surgeryShiftId) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/GetSurgeryShiftDetail/',\r\n        method: 'get',\r\n        data: { shiftId: surgeryShiftId },\r\n        success: function (shift) {\r\n            $('#span-id').html(shift.id);\r\n            $('#span-name').html(shift.patientName);\r\n            $('#span-gender').html(shift.gender);\r\n            $('#span-age').html(shift.age);\r\n            $('#span-specialty').html(shift.speciality);\r\n            $('#span-surgery-name').html(shift.surgeryName);\r\n            $('#span-surgery-type').html(shift.surgeryType);\r\n            $('#span-start-time').data('start', shift.startTime);\r\n            $('#span-start-time').html(formatStringtoDateTimeString(shift.startTime));\r\n            $('#span-end-time').data('end', shift.endTime);\r\n            $('#span-end-time').html(formatStringtoDateTimeString(shift.endTime));\r\n            $('#textarea-procedure').html(shift.procedure);\r\n\r\n            if (shift.actualStartTime != null) {\r\n                $('#span-actual-start-time').html(formatStringtoDateTimeString(shift.actualStartTime));\r\n                $('#span-actual-start-time').data('actual-start', shift.actualStartTime);\r\n            } else {\r\n                $('#span-actual-start-time').html('N/A');\r\n            }\r\n            if (shift.actualEndTime != null) {\r\n                $('#span-actual-end-time').html(formatStringtoDateTimeString(shift.actualEndTime));\r\n                $('#span-actual-end-time').data('actual-end', shift.actualEndTime);\r\n            } else {\r\n                $('#span-actual-end-time').html('N/A');\r\n            }\r\n        },\r\n        async: false\r\n    });\r\n}\r\n\r\nfunction makeSchedule() {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/MakeScheduleList',\r\n        method: 'get',\r\n        success: function (data) {\r\n            // SendNotification();\r\n        }\r\n    });\r\n}\r\n\r\nfunction loadSurgeryShiftNoSchedule() {\r\n    var div_shift = $('#div-shift-no-schedule');\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/GetSurgeryShiftsNoSchedule',\r\n        method: 'get',\r\n        success: function (data) {\r\n            if (data.length != 0) {\r\n                var container = '<table id=\"table-no-schedule\" class=\"table\"><thead><tr><th>No.</th><th>Shift ID</th>'\r\n                    + '<th>Confirm Time</th><th>Proposed Time</th><th>Schedule Time</th>'\r\n                    + '<th>Priority Number</th><th>ExpectedDuration</th></tr></thead>';\r\n                for (var i = 0; i < data.length; i++) {\r\n                    container += '<tr><td>' + (i + 1) + '</td>'\r\n                        + '<td>' + data[i].surgeryShiftId + '</td>'\r\n                        + '<td>' + data[i].confirmDate.split('T')[0] + ' ' + data[i].confirmDate.split('T')[1].split('.')[0] + '</td>';\r\n                    if (data[i].proposedStartDateTime != undefined\r\n                        && data[i].proposedEndDateTime != undefined) {\r\n                        container += '<td>' + data[i].proposedStartDateTime.split('T')[0]\r\n                            + ' | ' + data[i].proposedStartDateTime.split('T')[1] + ' - '\r\n                            + data[i].proposedEndDateTime.split('T')[1] + '</td>';\r\n                    } else {\r\n                        container += '<td>N/A</td>'\r\n                    }\r\n                    container += '<td>' + data[i].scheduleDate.split('T')[0] + '</td>'\r\n                        + '<td>' + data[i].priorityNumber + '</td>'\r\n                        + '<td>' + data[i].expectedSurgeryDuration + '</td></tr>';\r\n                }\r\n                container += '</table>';\r\n                div_shift.append(container);\r\n            } else {\r\n                div_shift.append('<h2>Not found no schedule surgery shift</h2>');\r\n            }\r\n\r\n        }\r\n    })\r\n}\r\n\r\nfunction checkStatus(surgeryId) {\r\n    const preStatus = 'Preoperative';\r\n    const intraStatus = 'Intraoperative';\r\n    const postStatus = 'Postoperative';\r\n    $('#btn-start-surgery').addClass('btn-visibility');\r\n    $('#btn-complete-surgery').addClass('btn-visibility');\r\n    $('#btn-finish-caring').addClass('btn-visibility');\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Status/GetStatusByShiftId/',\r\n        method: 'get',\r\n        data: { shiftId: surgeryId },\r\n        success: function (data) {\r\n            if (data.toLowerCase() == preStatus.toLowerCase()) {\r\n                $('#btn-start-surgery').removeClass('btn-visibility')\r\n            }\r\n            if (data.toLowerCase() == intraStatus.toLowerCase()) {\r\n                $('#btn-complete-surgery').removeClass('btn-visibility');\r\n            }\r\n            if (data.toLowerCase() == postStatus.toLowerCase()) {\r\n                $('#btn-finish-caring').removeClass('btn-visibility');\r\n            }\r\n        },\r\n        async: false\r\n    })\r\n}\r\n\r\nfunction appendChangeInfoShift(id, start, end) {\r\n    $('#change-shift-id').html(id);\r\n    $('#change-date').html(start.split(' ')[1]);\r\n    $('#change-start-time').html(start.split(' ')[0]);\r\n    $('#change-end-time').html(end.split(' ')[0])\r\n}\r\n\r\nfunction getScheduleByDay() {\r\n    var date = new Date($('#date-input').val());\r\n    loadSurgeryRoom(convertDateToNumber(date));\r\n}\r\n\r\n//Add emergency\r\nfunction AddEmergencyShift(startDatetime, endDatetime, chkForce) {\r\n    $.ajax({\r\n        url: EBSMSLocal + '/api/Schedule/AddEmergencyShift/',\r\n        method: 'post',\r\n        dataType: 'json',\r\n        contentType: 'application/json',\r\n        data: JSON.stringify({\r\n            startTime: startDatetime,\r\n            endTime: endDatetime,\r\n            isForceAdd: chkForce\r\n        }),\r\n        success: function (data) {\r\n            console.log(data);\r\n            if (data == true) {\r\n                alert('Success')\r\n                loadSurgeryRoom(convertDateToNumber(new Date($('#date-input').val())));\r\n            }\r\n            if (data == false) {\r\n                alert('Fail')\r\n            }\r\n        }\r\n    })\r\n}\r\n//---------------------------\r\n"]}