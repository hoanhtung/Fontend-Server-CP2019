<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- build:css styles/tungStyle.css -->
    <link rel="stylesheet" href="styles/headerStyle.css">
    <!-- endbuild -->
    <!-- build:css styles/tungStyle.css -->
    <link rel="stylesheet" href="styles/tungStyle.css">
    <!-- endbuild -->
    <!-- <script src="./js/tungJS.js"></script> -->
    <script src="./scripts/tungJS.js"></script>
    <!-- bower:js -->
    <script src="/bower_components/jquery/dist/jquery.js"></script>
    <script src="/bower_components/modernizr/modernizr.js"></script>
    <!-- endbower -->
    <!-- bower:js -->
    <script src="/bower_components/jquery/dist/jquery.js"></script>
    <script src="/bower_components/modernizr/modernizr.js"></script>
    <!-- endbower -->
    <title>Surgery Management System</title>
    <script>
        $(function () {
            $("#header").load("./layout/header.html");
            // $("#navigation").load("./layout/navigation.html"); 
        })
    </script>
</head>

<body onload="loadSurgeryShiftDetail(window.location.search.split('=')[1])">
    <div class="dashboard-main-wrapper">
        <div id="header"></div>
        <div class="container-scheduleItem">
            <div class="dashboard-ecommerce">
                <div class="container-fluid dashboard-content">
                    <div class="row">
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="title-surgery-shift">
                                <h2>Information of Surgery Shift</h2>
                            </div>
                        </div>
                    </div>
                    <div class="div-surgery-report form-group">
                        <table class="table table-borderless table-information-shift">
                            <tr>
                                <td><b>Patient:</b></td>
                                <td id="span-name"></td>
                                <td><b>Gender:</b></td>
                                <td id="span-gender"></td>
                                <td><b>Age:</b></td>
                                <td id="span-age"></td>
                            </tr>
                            <tr>
                                <td ><b>Specialty:</b></td>
                                <td id="span-specialty"></td>
                            </tr>
                            <tr>
                                <td><b>Surgery Name:</b></td>
                                <td id="span-surgery-name"></td>
                                <td><b>Type Of Surgery:</b></td>
                                <td id="span-surgery-type"></td>
                            </tr>

                            <tr>
                                <td><b>Start Time:</b></td>
                                <td id="span-start-time"></td>
                                <td><b>End Time:</b></td>
                                <td id="span-end-time"></td>
                            </tr>
   
                        </table>
                        <hr />
                        <b>Surgery Information Detail:</b>
                        <div class="div-editable-information row">
                            <div class="div-ekip col-6">
                                <div><b>Performed Ekip:</b></div>
                                <br />
                                <table class="table-ekip">
                                        
                                </table>
                            </div>
                            <div class="div-procedure col-6">
                                <div><b>Surgery Procedure:</b></div>
                                <br />
                                <textarea style="padding: 30px" id="textarea-procedure" rows="20" cols="50">
- Thì 1:Mở bụng:
+ Mở bụng đường trắng giữa dưới rốn, có thể kéo lên trên rốn nếu cần
+ Thăm dò toàn bộ ổ bụng
- Thì 2:Vét hạch chậu:
+ Cắt dây chằng tròn càng xa tử cung càng tốt, sát về phía thành chậu
+ Cắt dây chằng tử cung- buồng trứng, nếu có chỉ định cắt buồng trứng thì cắt
dây chằng thắt lưng –buồng trứng
+ Mở phúc mạc song song với hướng đi của động mạch chậu ngoài
+ Bộc lộ niệu quản
74
+ Vét hạch chậu dọc theo động mạch chậu ngoài, tĩnh mạch chậu ngoài, động
mạch chậu trong, tĩnh mạch chậu trong cho tới hố bịt đến dây thần kinh bịt
- Thì 3:Cắt tử cung
+ Cắt lá phúc mạc ở túi cùng trước, đẩy bàng quang xuống thấp
+ Cắt động mạch tử cung
+ Cắt 2 dây chằng tử cung- cùng, đẩy trực tràng xuống
+ Cắt tử cung hoàn toàn
+ Khâu mỏm âm đạo
+ Kiểm tra cầm máu, kiểm tra niệu quản, bàng quang
+ Đóng bụng theo các lớp giải phẫu
                                </textarea>
                            </div>
                        </div>
                        <br/>
                        <br/>
                        <a href="./viewSchedule.html"><button class="btn btn-danger">Back</button></a>
                        <div style="float: right">
                            <input style="margin-right: 20px;" class="btn btn-info" type="button" value="Preview Surgery Report" />
                            <input class="btn btn-success" type="button" value="Complete Surgery Shift" onclick="setPostStatus(window.location.search.split('=')[1])"/> <br />
                        </div>
                        
                        
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script>
        $('#changeTimeModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            var scheduleIndex = button.data('schedule-index');
            $('#changeRoomWrapper').css('visibility', 'hidden');
            $('#changeRoom').data('shift-id', scheduleIndex);
            $('#changeRoomDurationWrapper').css('visibility', 'hidden');
            $('#changeRoomDuration').data('shift-id', scheduleIndex);
        });
        $('#checkSchedule').click(function () {
            var start = new Date($('#startTime').val()).toJSON();
            var end = new Date($('#endTime').val()).toJSON();
            loadAvailableRoomByStartEnd(start, end);
        });
        $('#checkScheduleDuration').click(function () {
            var hour = $('#hour').val();
            var minute = $('#minute').val();
            loadAvailableRoomByHourMinute(hour, minute);
        });
        $('#changeRoom').click(function () {
            var shiftId = $(this).data('shift-id');
            var start = new Date($('#startTime').val()).toJSON();
            var end = new Date($('#endTime').val()).toJSON();
            var roomId = Number.parseInt($('#availableRoom').val());
            changeSchedule(shiftId, start, end, roomId);
        });
        $('#changeRoomDuration').click(function () {
            var shiftId = $(this).data('shift-id');
            var room = $('#availableDurationRoom').val();
            var roomArr = room.split(';');
            var roomId = Number.parseInt(roomArr[0]);
            var start = roomArr[1];
            var end = roomArr[2];
            changeScheduleDuration(shiftId, start, end, roomId);
        });
    </script>
</body>

</html>